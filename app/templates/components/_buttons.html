{% from 'components/_icons.html' import create, delete, edit, cancel %}

{# In your components/_macros.html or similar #}

{% macro button(text=None, variant='primary', icon_name=None, href=None, id='', class='', type='button', aria_label=None) %}
    
    {# Determine the tag based on whether href is provided #}
    {% set tag = 'a' if href else 'button' %}

    {% set accessible_name = aria_label if aria_label else text %}

    {# Start building the tag #}
    <{{ tag }}
        {% if id %}id="{{ id }}"{% endif %}
        {# Apply base class, variant modifier, and any extra classes #}
        class="btn btn--{{ variant }} {{ class }}"
        {# Add button-specific type or link href #}
        {% if tag == 'button' %}type="{{ type }}"{% endif %}
        {% if href %}href="{{ href }}"{% endif %}

        {% if aria_label %}aria-label="{{ aria_label }}"{% endif %}
    >
        {# Conditionally include the icon span #}
        {% if icon_name %}
            <span class="material-symbols-outlined btn__icon" aria-hidden="true">{{ icon_name }}</span>
        {% endif %}

        {# Always include the text span (CSS handles hiding it) #}
        {% if text %}
            <span class="btn__text">{{ text }}</span>
        {% endif %}

    </{{ tag }}>
{% endmacro %}
